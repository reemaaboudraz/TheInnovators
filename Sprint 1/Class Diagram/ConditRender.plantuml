@startuml ConditRender
skinparam DefaultFontName Arial
skinparam DefaultFontSize 16
skinparam DefaultFontStyle bold
skinparam ArrowThickness 2.2

' ========== Domain types (data shapes) ==========

enum "LocationStatus" as LocationStatus {
    idle
    loading
    granted
    denied
}
CampusMap -[hidden]-> LocationStatus
' ========== Implemented: UI (functional components as classes) ==========
class "CampusMap" as CampusMap {
    - focusedCampus : Campus
    - query : string
    - selected : Building | null
    - userLocation : LatLng | null
    - ALL_BUILDINGS : Building[]
    + SGW_REGION : Region
    + LOY_REGION : Region
    + handleCampusChange(campus : Campus) : void
    + handleLocationFound(location : LatLng) : void
    + onPickBuilding(b : Building) : void
}


class "CurrentLocationButton" as CurrentLocationButton {
    + onLocationFound(location : UserLocation) : void
    + onPermissionDenied?() : void
}

class "BuildingsLoadError" as BuildingsLoadError {
    + visible : boolean
    + onRefresh() : void
    + accentColor? : string
    + testIDPrefix? : string
}

CampusMap "1" --> "1" CurrentLocationButton : renders
CampusMap "1" --> "1" BuildingsLoadError : uses for error handling

CurrentLocationButton "1" ..> "1" LocationStatus : uses for permission status

@enduml