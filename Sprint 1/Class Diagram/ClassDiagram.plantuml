@startuml Class Diagram
skinparam DefaultFontName Arial
skinparam DefaultFontSize 16
skinparam DefaultFontStyle bold
skinparam ArrowThickness 2.2
title <u>Class Diagram - Concordia Campus Guide App - Version 3 (with annotations)</u>\n<i>Date : 2026-02-08 </i>\n<i>Authors : Malak Sefrioui and Yash Nathani</i>
hide empty members

note as Scope
    <size:18><b><u>Scope :</u></b></size>
    This class diagram represents the static structure of the Concordia Campus Guide App.
    It includes classes for campuses, buildings, claases, rooms, and points of interest (POIs)
    such as washrooms, elevators, and stairs. The diagram illustrates the relationships
    between these classes, highlighting associations and compositions that define how
    different entities interact within the system.
end note

' ========== Domain types (data shapes) ==========
enum "Campus" as Campus {
    SGW
    LOY
}

CampusMap "1" --> "1" CurrentLocationButton : renders
CampusMap "1" --> "1" LoyolaBuildings : uses for search
CampusMap "1" --> "1" SGWBuildings : uses for search

abstract class "Tabs"{}

class "MapTab" as Map {
    -CampusMap : CampusMap
}

class "WelcomeTab" as Welcome {
    -WelcomeScreen : WelcomeScreen
}

class "ConnectClassTab" as ClassTab {
    -ConnectClass : ConnectClass
}

class "ConnectClass" as ConnectClass {
    -Classes : Class[]
}

ConnectClass "1" --> "1" Class : uses
ClassTab "1" --> "1" ConnectClass : renders
ConnectClass "1" --> "1" BrandBar : renders

Tabs <|-- Map
Tabs <|-- Welcome
Tabs <|-- ClassTab

Map "1" --> "1" CampusMap : renders
Welcome "1" --> "1" WelcomeScreen : renders

Welcome "1" <--> "1" Map : navigates to
ClassTab "1" <--> "1" Welcome : navigates to
Map "1" <--> "1" ClassTab : navigates to

enum "LocationStatus" as LocationStatus {
    idle
    loading
    granted
    denied
}

class "LatLng" as LatLng {
    + latitude : number
    + longitude : number
}

class "Region" as Region {
    - latitude : number
    - longitude : number
    - latitudeDelta : number
    - longitudeDelta : number
}

class "Building" as Building {
    - id : string
    - campus : Campus
    - code : string
    - name : string
    - address : string
    - latitude : number
    - longitude : number
    - aliases : string[]
    - polygon : LatLng[]
    - numberOfFloors: int
    - codename : String
    - indoors: List<Indoor>
}

LoyolaBuildings "1" --> "*" Building : uses
SGWBuildings "1" --> "*" Building : uses

' ========== Implemented: data and search ==========
class "SGWBuildingsSearch" as SGWBuildings {
    - SGW_BUILDINGS : Building[]
    + searchSGWBuildings(query : string, limit? : number) : Building[]
    + getSGWBuildingByCode(code : string) : Building | undefined
}

class "LoyolaBuildingsSearch" as LoyolaBuildings {
    - LOYOLA_BUILDINGS : Building[]
    + normalizeText(text : string) : string
    + searchLoyolaBuildings(searchQuery : string, resultLimit? : number) : Building[]
    + getLoyolaBuildingByCode(code : string) : Building | undefined
}

' ========== Implemented: UI (functional components as classes) ==========
class "CampusMap" as CampusMap {
    - focusedCampus : Campus
    - query : string
    - selected : Building | null
    - userLocation : LatLng | null
    - ALL_BUILDINGS : Building[]
    + SGW_REGION : Region
    + LOY_REGION : Region
    + handleCampusChange(campus : Campus) : void
    + handleLocationFound(location : LatLng) : void
    + onPickBuilding(b : Building) : void
}

CampusMap "1" --> "2" Region : has
CampusMap "1" --> "0..1" Building : selected
CampusMap "1" --> "*" Building : uses for rendering
CampusMap "1" --> "1" LatLng : userLocation
Building "1" --> "*" LatLng : polygon

class "BuildingShapesLayer" as BuildingShapesLayer {
    - buildings : Building[]
    - selectedBuildingId : string | null
    - userLocationBuildingId : string | null
    + onPickBuilding(b : Building) : void
}

BuildingShapesLayer "1" --> "*" Building : renders on map

class "ToggleButton" as ToggleButton {
    - focusedCampus : Campus
    + onCampusChange(campus : Campus) : void
    + calculatePanValue(currentCampus : Campus, dx : number, toggleWidth : number) : number
    + determineCampusFromPan(currentCampus : Campus, dx : number, toggleWidth : number) : Campus
}

class "CurrentLocationButton" as CurrentLocationButton {
    + onLocationFound(location : UserLocation) : void
    + onPermissionDenied?() : void
}

class "BrandBar" as BrandBar {
    + height? : number
    + backgroundColor? : string
    + testID? : string
    + adjustColorShade(baseColor : string, intensity : number) : string
}

class "WelcomeScreen" as WelcomeScreen {
    + onGoogleSignInPress() : void
    + onContinueGuestPress() : void
}

class "BuildingsLoadError" as BuildingsLoadError {
    + visible : boolean
    + onRefresh() : void
    + accentColor? : string
    + testIDPrefix? : string
}

CampusMap "1" --> "1" BuildingShapesLayer : renders
CampusMap "1" --> "1" ToggleButton : renders
CampusMap "1" --> "1" BrandBar : renders
CampusMap "1" --> "1" PointOfInterest : uses
CampusMap "1" --> "1" BuildingsLoadError : uses for error handling


abstract class "PointOfInterest" as PointOfInterest {
    - latitude: double
    - longitude: double
}
abstract class "Indoor" as Indoor {
    - latitude: double
    - longitude: double
}

class "Washroom" as Washroom {
    - latitude: double
    - longitude: double
    - isPublic: boolean
    - isGenderNeutral: boolean
    - isMale: boolean
    - isFemale: boolean
    - isAccessible: boolean
    - floorNB: int
}
class "Elevator" as Elevator {
    - latitude: double
    - longitude: double
    - isAccessible: boolean
}
class "Stairs" as Stairs {
    - latitude: double
    - longitude: double
}

class "WaterFountain" as WaterFountain {
    - latitude: double
    - longitude: double
    - hasBottleFiller: boolean
    - floorNB: int
}

class "Room" as Room {
    - latitude: double
    - longitude: double
    - roomNumber: String
    - capacity: int
    - floorNB: int
}

abstract class "Outdoor" as Outdoor {
    - address: String
    - name: String
    - type : String
    - latitude: double
    - longitude: double
}

class "Restaurant" as Restaurant {
    - address: String
    - name: String
    - type : String
    - latitude: double
    - longitude: double
    - cuisineType: String
}
class "CoffeeShop" as CoffeeShop {
    - address: String
    - name: String
    - type : String
    - latitude: double
    - longitude: double
}

class "Class" as Class {
    - courseCode: String
    - courseName: String
    - instructor: String
    - dayOfWeek: String
    - startTime: String
    - endTime: String
    - heldIn: Room
}

Class "1" --> "1" Room : heldIn

Building "1" --> "*" Indoor : contains


PointOfInterest <|-- Indoor
Indoor <|-- Washroom
Indoor <|-- Elevator
Indoor <|-- Stairs
Indoor <|-- WaterFountain
Indoor <|-- Room
PointOfInterest <|-- Outdoor
Outdoor <|-- Restaurant
Outdoor <|-- CoffeeShop


CurrentLocationButton "1" ..> "1" LocationStatus : uses for permission status

@enduml